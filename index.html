<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body>
    <div id="main">
        <!--V-if 
 -->
        <!-- <button @click="contador++">
            {{ contador }}
        </button>

        <hr>
        <label>
            nombre
        </label>
        <input type="" onkeyup="copy(this)" v-model="username">
        <label>
            tu nombre: {{ username }}
        </label> -->


        <!--  <input type="number" v-model="numero1">
        <hr>
        <br>
        <input type="number" v-model="numero2">
        <hr>
        <br>
        <button v-on:click="resultado=numero1+numero2">
            sumar
        </button>
        <label>
            el resultado de la suma es {{ resultado }}
        </label>
        <br>
        <hr>
        <form>
            <div v-for="item in usuarios" :key="item.id">
                Nombre: {{ item.name }} -
                Edad: {{ item.edad }}
            </div>
            <label>
                nombre
            </label>
            <input type="text" v-model="name">
            <input type="text" v-model="edad">
            <button v-on:click="usuariosNuevos" type="button">
                guardar
            </button>
        </form>
 -->

        <hr>
        <form @submit.prevent="onSubmit" v-if="confirmar">

            <label>
                Email
            </label>
            <input type="email" v-model="email">


            <label>
                Password
            </label>
            <input type="password" v-model="password">

            <button>
                guardar
            </button>

        </form>

        <div v-if="!confirmar">


            <!-- para no batallar usare el componente de tabla de boostrap -->
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">username</th>
                        <th scope="col">Email</th>
                        <th scope="col">Calle</th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div v-for="item in usuarios" :key="item.id">
                                {{ item.id }}
                            </div>
                        </td>
                        <td>
                            <div v-for="item in usuarios" :key="item.id">
                                {{ item.name }}
                            </div>
                        </td>
                        <td>
                            <div v-for="item in usuarios" :key="item.id">
                                {{ item.username }}
                            </div>
                        </td>
                        <td>
                            <div v-for="item in usuarios" :key="item.id">
                                {{ item.email }}
                            </div>
                        </td>
                        <td>
                            <div v-for="item in usuarios" :key="item.id">
                                {{ item.address.street }}
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const { createApp, ref } = Vue

        createApp({
            setup() {
                const message = ref('Hello vue!')
                /* let contador
                let numero1
                let numero2
                let resultado
                let name = ref(0)
                let edad = ref(0)
                let usuarios = ref([
                    {
                        "name": "oscar",
                        "edad": "20"
                    },
                ]) */
                let email
                let password
                let confirmar
                let usuarios

                return {
                    /* message,
                    contador: ref(0),
                    username: ref(''),
                    numero1: ref(0),
                    numero2: ref(0),
                    resultado: ref(0),
                    usuarios,
                    edad */
                    email: ref(''),
                    password: ref(''),
                    confirmar: ref(true),

                    usuarios: ref([])


                }


            },
            methods: {
                /* usuariosNuevos() {


                    let nuevo = {
                        "name": this.name,
                        "edad": this.edad
                    }
                    this.usuarios.push(nuevo)
                    this.name = ''
                    this.edad = ''

                } */


                onSubmit(e) {
                    let file = "users.json";

                    fetch(file)
                        .then(response => response.json())
                        .then(response => {
                            response.forEach((user) => {
                                if (user.email == this.email && user.password == this.password) {
                                    this.confirmar = false

                                }
                                console.log(user)
                                this.usuarios = response
                            });
                            if (this.confirmar == true) {
                                alert("no se ha encontrado el usuario")
                            }
                        })
                }



            }
        }).mount('#main')
    </script>
</body>

</html>